{% extends 'layout/base.html' %}
{% load static %}
{% load comment_tags %}
{% load ratings %}


{% block css_files %}
	<link rel="stylesheet" href="{% static 'blog/css/journey_blog.css' %}">
	<link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">
{% endblock css_files %}

{% block js_files %}
	<script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
{% endblock js_files %}

{% block content %}
<section id="main">
    <div class="container">
        <h2 style="position: relative; right: 75px;">{{ blog.title|title }}</h2>
        <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                {% for image in images %}
                    {% if image %}
                        {% if forloop.counter == 1 %}
                            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide {{forloop.counter}}"></button>
                        {% else %}
                            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="{{forloop.counter|add:"-1"}}" aria-label="Slide {{forloop.counter}}"></button>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            <div class="carousel-inner">
                {% for image in images %}
                    {% if image %}
                        {% if forloop.counter == 1 %}
                            <div class="carousel-item active">
                        {% else %}
                            <div class="carousel-item">
                        {% endif %}

                                <img src="{{image.url}}" class="d-block w-100" alt="...">
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>

        <p style="font-size: 32px;">{{ blog.description|safe|linebreaks }}</p>

        <div class="row">
            {% ratings blog %}
        </div>
        <div class="row">
            {% render_comments blog request %} 
        </div>
    </div>
  </div>		
</section>
{% endblock content %}

{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

    {% comment %} <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> {% endcomment %}
{% endblock scripts %}